@page "/"
@layout MainLayoutClient
@rendermode @(new InteractiveServerRenderMode(prerender: true))

<PageTitle>Trang chủ - Taxi Nam Thắng</PageTitle>

<SeoHeaderComponent Title="Taxi Nam Thắng – Taxi Kiên Giang, Rạch Giá, Hà Tiên, Phú Quốc, Vĩnh Long, Cần Thơ, Bạc Liêu, Cà Mau, An Giang nhanh chóng, an toàn, giá rẻ"
                    Description="Taxi Nam Thắng cung cấp dịch vụ taxi tại Kiên Giang, Rạch Giá, Hà Tiên, Phú Quốc, Vĩnh Long, Cần Thơ, Bạc Liêu, Cà Mau, An Giang. Phục vụ 24/7, xe đời mới, tài xế thân thiện, giá rẻ."
                    Image="./imgs/cusomters/homepage.jpg" />

<AuthorizedContent>
    <ChildContent>
        <RedirectToDashboard />
    </ChildContent>
    <NotAuthorizedContent>

        <!-- Hero -->
        <main class="mx-auto max-w-7xl px-6 py-12">
            <section class="grid items-center gap-8 lg:grid-cols-2">
                <div>
                    <h2 class="text-3xl leading-tight font-extrabold sm:text-4xl">Taxi Nam Thắng — Di chuyển an toàn, đến nơi đúng giờ</h2>
                    <p class="mt-4 text-gray-600">Chúng tôi cung cấp dịch vụ taxi chuyên nghiệp, đội xe mới, tài xế thân thiện và giá cả minh bạch. Hỗ trợ đặt xe qua điện thoại, website và QR pay.</p>

                    <div class="mt-6 flex flex-wrap gap-3">
                        <a href="#booking" class="rounded-md bg-lime-500 px-5 py-3 text-white shadow">Đặt xe ngay</a>
                        <a href="#contact" class="rounded-md border px-5 py-3">Liên hệ tư vấn</a>
                    </div>

                    <div class="mt-8 grid grid-cols-3 gap-4 sm:grid-cols-3">
                        <div class="rounded-lg p-4 text-center text-gray-800 shadow">
                            <div class="text-2xl font-bold">24/7</div>
                            <div class="text-xs opacity-80">Hỗ trợ</div>
                        </div>

                        <div class="rounded-lg bg-emerald-500 p-4 text-center text-white shadow">
                            <div class="text-2xl font-bold">300+</div>
                            <div class="text-xs opacity-80">Tuyến đường/Ngày</div>
                        </div>

                        <div class="rounded-lg bg-yellow-400 p-4 text-center text-gray-800 shadow">
                            <div class="text-2xl font-bold">4.9★</div>
                            <div class="text-xs opacity-80">Đánh giá</div>
                        </div>
                    </div>
                </div>

                <div class="order-first lg:order-last">
                    <img src="./imgs/customers/homepage.jpg" alt="Taxi" class="h-64 w-full rounded-lg object-cover sm:h-72" />
                </div>
            </section>
            <!-- About -->
            <section id="about" class="mt-16 rounded-xl bg-white p-6 shadow-sm">
                <h3 class="text-2xl font-semibold">Về Taxi Nam Thắng</h3>
                <p class="mt-3 text-gray-600">Với hơn 10 năm kinh nghiệm phục vụ hành khách trong và ngoài tỉnh, Taxi Nam Thắng cam kết mang đến trải nghiệm di chuyển an toàn, sạch sẽ và đúng giờ. Đội ngũ tài xế của chúng tôi được đào tạo bài bản, xe được bảo trì định kỳ và trang bị tiện nghi cơ bản.</p>

                <div class="mt-6 grid gap-4 md:grid-cols-3">
                    <div class="rounded-lg border p-4">
                        <h4 class="font-semibold">An toàn</h4>
                        <p class="mt-2 text-sm text-gray-500">Kiểm tra xe trước mỗi ca, tuân thủ quy định giao thông.</p>
                    </div>
                    <div class="rounded-lg border p-4">
                        <h4 class="font-semibold">Giá minh bạch</h4>
                        <p class="mt-2 text-sm text-gray-500">Báo giá rõ ràng, không phát sinh phí không thỏa thuận.</p>
                    </div>
                    <div class="rounded-lg border p-4">
                        <h4 class="font-semibold">Hỗ trợ 24/7</h4>
                        <p class="mt-2 text-sm text-gray-500">Đặt xe nhanh qua số hotline hoặc form trực tuyến.</p>
                    </div>
                </div>
            </section>
            <!-- Services -->
            <section id="services" class="mt-10">
                <h3 class="text-xl font-semibold">Dịch vụ của chúng tôi</h3>
                <div class="mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
                    <div class="rounded-lg bg-white p-4 shadow-sm">
                        <h4 class="font-semibold">Taxi thường</h4>
                        <p class="mt-2 text-sm text-gray-500">Di chuyển trong thành phố, giá hợp lý.</p>
                    </div>
                    <div class="rounded-lg bg-white p-4 shadow-sm">
                        <h4 class="font-semibold">Xe gia đình</h4>
                        <p class="mt-2 text-sm text-gray-500">Xe 4-7 chỗ, phù hợp cho gia đình và nhóm nhỏ.</p>
                    </div>
                    <div class="rounded-lg bg-white p-4 shadow-sm">
                        <h4 class="font-semibold">Sân bay</h4>
                        <p class="mt-2 text-sm text-gray-500">Đón tiễn sân bay đúng giờ, theo dõi chuyến bay.</p>
                    </div>
                    <div class="rounded-lg bg-white p-4 shadow-sm">
                        <h4 class="font-semibold">Hợp đồng doanh nghiệp</h4>
                        <p class="mt-2 text-sm text-gray-500">Giải pháp di chuyển cho doanh nghiệp, hóa đơn VAT.</p>
                    </div>
                </div>
            </section>
            <!-- Fleet -->
            <section id="fleet" class="mt-10 rounded-xl bg-white p-6 shadow-sm">
                <h3 class="text-xl font-semibold">Đội xe</h3>
                <p class="mt-2 text-sm text-gray-500">Đa dạng loại xe đáp ứng mọi nhu cầu.</p>
                <div class="mt-4 grid gap-4 sm:grid-cols-2 md:grid-cols-3">
                    <div class="overflow-hidden rounded-lg border">
                        <img src="./imgs/customers/vf5.jpg" alt="Xe 4 chỗ" class="h-40 w-full object-cover" />
                        <div class="p-4">
                            <h4 class="font-semibold">Xe điện 4 chỗ - VF 5</h4>
                            <p class="mt-1 text-sm text-gray-500">Tiện lợi cho di chuyển cá nhân hoặc gia đình nhỏ.</p>
                        </div>
                    </div>
                    <div class="overflow-hidden rounded-lg border">
                        <img src="./imgs/customers/vf6.jpg" alt="Xe 5 chỗ" class="h-40 w-full object-cover" />
                        <div class="p-4">
                            <h4 class="font-semibold">Xe điện 5 chỗ - VF 6</h4>
                            <p class="mt-1 text-sm text-gray-500">Phù hợp cho nhóm và gia đình lớn.</p>
                        </div>
                    </div>
                    <div class="overflow-hidden rounded-lg border">
                        <img src="https://images.unsplash.com/photo-1511919884226-fd3cad34687c?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=mnop" alt="Xe Limousine" class="h-40 w-full object-cover" />
                        <div class="p-4">
                            <h4 class="font-semibold">Limousine</h4>
                            <p class="mt-1 text-sm text-gray-500">Thoải mái, sang trọng cho hành trình dài.</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Booking form (mock) -->
            <section id="booking" class="bg-gradient-to-r mt-10 rounded-xl from-white to-blue-50 p-6">
                <h3 class="text-xl font-semibold">Đặt xe nhanh</h3>
                <p class="mt-1 text-sm text-gray-500">Nhập thông tin cơ bản, tài xế sẽ liên hệ xác nhận.</p>

                <EditForm Model="@order" OnValidSubmit="@HandleSubmit">
                    <DataAnnotationsValidator />

                    <div class="mt-4 grid gap-3 md:grid-cols-3">
                        <!-- Họ và tên -->
                        <div>
                            <InputText @bind-Value="order.CO_Name" class="w-full rounded-md border p-3" placeholder="Họ và tên" />
                            <ValidationMessage For="@(() => order.CO_Name)" class="text-red-600 text-sm mt-1" />
                        </div>

                        <!-- Số điện thoại -->
                        <div>
                            <InputText @bind-Value="order.CO_Phone" class="w-full rounded-md border p-3" placeholder="Số điện thoại" />
                            <ValidationMessage For="@(() => order.CO_Phone)" class="text-red-600 text-sm mt-1" />
                        </div>

                        <!-- Ngày giờ -->
                        <div>
                            <InputDate @bind-Value="order.CO_DateOrder" class="w-full rounded-md border p-3" />
                        </div>

                        <!-- Điểm đi - đến -->
                        <div class="md:col-span-2">
                            <InputText @bind-Value="order.CO_Locations" class="w-full rounded-md border p-3" placeholder="Điểm đi - Điểm đến" />
                        </div>

                        <!-- Loại xe -->
                        <div>
                            <InputSelect @bind-Value="order.CO_TypeCar" class="w-full rounded-md border p-3">
                                <option value="">Chọn loại xe</option>
                                <option>Xe 4 chỗ</option>
                                <option>Xe 5 chỗ</option>
                                <option>Khác</option>
                            </InputSelect>
                        </div>

                        <!-- Nút gửi -->
                        <button type="submit" class="rounded-md bg-lime-500 px-4 py-3 text-white md:col-span-3">
                            Gửi yêu cầu
                        </button>
                    </div>
                </EditForm>

                @if (message != null)
                {
                    <p class="mt-3 font-medium text-green-600">@message</p>
                }

            </section>
            <!-- Contact -->
            <section id="contact" class="mt-10 rounded-xl bg-white p-6 shadow-sm">
                <h3 class="text-xl font-semibold">Liên hệ</h3>
                <div class="mt-4 grid gap-4 md:grid-cols-4">
                    <div>
                        <p class="mb-2 text-lg font-semibold">Social</p>
                        <div class="flex items-center gap-3">
                            <!-- Facebook -->
                            <a href="https://www.facebook.com/tapdoannamthang/" target="_blank"
                               class="transform rounded-full bg-blue-50 p-2 text-blue-600 transition duration-200 hover:scale-110 hover:bg-blue-100 hover:text-blue-800">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="h-7 w-7">
                                    <path d="M22.675 0h-21.35C.595 0 0 .594 0 1.326v21.348C0 23.405.595 24 1.325 24H12.82v-9.294H9.692V11.01h3.128V8.309c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.464.098 2.796.142v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.696h-3.12V24h6.116A1.326 1.326 0 0024 22.674V1.326C24 .594 23.405 0 22.675 0z" />
                                </svg>
                            </a>

                            <!-- Zalo -->
                            <a href="" target="_blank"
                               class="transform rounded-full bg-sky-50 p-2 text-sky-500 transition duration-200 hover:scale-110 hover:bg-sky-100 hover:text-sky-700">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="h-7 w-7" fill="currentColor">
                                    <path d="M24 4C12.954 4 4 12.954 4 24c0 11.046 8.954 20 20 20 3.248 0 6.303-.775 9.02-2.15l5.893 2.015a1 1 0 0 0 1.289-1.27l-1.87-5.388A19.93 19.93 0 0 0 44 24c0-11.046-8.954-20-20-20zm3.5 28h-3l-4-10h3l2.5 6.5L28.5 22h3l-4 10zm-9.7 0h-2.8v-2.1l5.2-7.9H15v-2.6h8.2v2.1l-5.4 8.2h5.5V32zm16.4 0h-5.4v-2.6h5.4V32zm0-4.5h-5.4v-6h5.4v2.5H29v1h5.2v2.5z" />
                                </svg>
                            </a>
                            <!-- Youtube -->
                            <a href="https://www.youtube.com/@@namthanggroup5444/" target="_blank"
                               class="transform rounded-full bg-red-100 p-2 text-red-600 transition duration-200 hover:scale-110 hover:bg-red-200 hover:text-red-800">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-7 w-7" fill="currentColor">
                                    <path d="M23.498 6.186a2.987 2.987 0 0 0-2.103-2.103C19.61 3.5 12 3.5 12 3.5s-7.61 0-9.395.583a2.987 2.987 0 0 0-2.103 2.103A31.607 31.607 0 0 0 0 12a31.607 31.607 0 0 0 .502 5.814 2.987 2.987 0 0 0 2.103 2.103C4.39 20.5 12 20.5 12 20.5s7.61 0 9.395-.583a2.987 2.987 0 0 0 2.103-2.103A31.607 31.607 0 0 0 24 12a31.607 31.607 0 0 0-.502-5.814zM9.545 15.568V8.432l6.182 3.568-6.182 3.568z" />
                                </svg>
                            </a>
                        </div>
                        <img src="./imgs/customers/qrcode-taiapp.png" class="mt-3 flex h-50 items-center justify-center rounded-md" />
                    </div>
                    <div>
                        <p class="font-semibold">Hotline</p>
                        <p class="mt-1 text-gray-600">Rạch Giá: 02973 69 69 69</p>
                        <p class="mt-1 text-gray-600">Hà Tiên: *5656</p>
                        <p class="mt-1 text-gray-600">Phú Quốc: 02973 75 75 75</p>
                        <p class="mt-1 text-gray-600">Bạc Liêu: 02913 75 75 75</p>
                        <p class="mt-1 text-gray-600">Vĩnh Long: 02913 59 59 59</p>
                        <p class="mt-1 text-gray-600">Sóc Trăng: 02913 69 69 69</p>
                        <p class="mt-1 text-gray-600">Cần Thơ: *6869</p>
                        <p class="mt-1 text-gray-600">An Giang: 02973 56 56 56</p>
                        <p class="mt-1 text-gray-600">Hậu Giang: 02973 95 95 95</p>
                        <p class="mt-1 text-gray-600">Cà Mau: 02903 56 56 56</p>
                    </div>
                    <div>
                        <p class="font-semibold">Email</p>
                        <p class="mt-1 text-gray-600">it.support@namthanggroup.vn</p>
                    </div>
                    <div class="mx-auto my-6 max-w-4xl p-4">
                        <p class="text-lg font-semibold">Trụ sở chính</p>
                        <p class="mt-1 text-gray-600">
                            Đường số 3, Ấp Sua Đũa, Xã Vĩnh Hòa Hiệp, Huyện Châu Thành, Tỉnh Kiên Giang
                        </p>

                        <div class="mt-4 h-35 w-full overflow-hidden rounded-xl border shadow-lg">
                            <iframe class="h-full w-full"
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.728118210271!2d106.68229171526015!3d10.77779616251412!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1ed3f3cba3%3A0x123456789abcdef!2sYour%20Location!5e0!3m2!1sen!2s!4v1690000000000!5m2!1sen!2s"
                                    allowfullscreen=""
                                    loading="lazy"
                                    referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Footer -->
            <footer class="mt-10 text-center text-sm text-gray-500">
                © Copyright 2025 vanlt. All rights reserved. <span id="year"></span> Bản quyền thuộc về Taxi Nam Thắng.
            </footer>
        </main>
    </NotAuthorizedContent>
</AuthorizedContent>

@code {
    private CustomerOrder order = new();
    private DateTime currentDateTime = DateTime.Now;
    private string? message;
    [Inject] private IZaloCustomerService zaloService { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            order.CO_DateOrder = DateTime.Now;
            order.CO_TypeCar = "Xe 4 chỗ";
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    }

    private async Task HandleSubmit()
    {
        order.Id = Guid.NewGuid().ToString();

        // TODO: Gửi lên API hoặc lưu database
        message = $"Cảm ơn {order.CO_Name}, yêu cầu của bạn đã được gửi!";
        await ZaloSubmit(order);
        await Task.Delay(500);

        // reset form
        order = new();
        order.CO_DateOrder = DateTime.Now;
        order.CO_TypeCar = "Xe 4 chỗ";
    }

    private async Task ZaloSubmit(CustomerOrder _order)
    {
        await zaloService.SendMessageToGroup("zlw5854317081527408892", $"Khách hàng: {_order.CO_Name}\r\nSố điện thoai: {_order.CO_Phone}\r\nĐịa điểm: {_order.CO_Locations}");
    }
}